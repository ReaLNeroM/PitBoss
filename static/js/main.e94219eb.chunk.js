(this["webpackJsonppitboss-client"]=this["webpackJsonppitboss-client"]||[]).push([[0],{38:function(e,a,t){e.exports=t(76)},43:function(e,a,t){},70:function(e,a,t){},71:function(e,a,t){},74:function(e,a,t){},76:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),l=t(33),o=t.n(l),i=(t(43),t(11)),s=t.n(i),c=t(14),m=t(5),d=t(6),u=t(15),h=t(8),p=t(7),g=t(18),v=t(13),f=t(3),b=function(e){Object(h.a)(t,e);var a=Object(p.a)(t);function t(e){var r;return Object(m.a)(this,t),(r=a.call(this,e)).state={apiUrl:e.apiUrl,title:e.title,isLoggedIn:e.isLoggedIn},r}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){var a=e.title,t=e.isLoggedIn,r=this.props,n=r.title,l=r.isLoggedIn;n===a&&l===t||this.setState({title:n,isLoggedIn:l})}},{key:"doLogout",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("".concat(this.state.apiUrl,"/auth/logout"),{method:"POST",credentials:"include"}).then((function(e){return e.json()})).then((function(e){return console.log(e)}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,a=e.title,t=e.isLoggedIn,r=this.props.location,l=this.doLogout.bind(this),o=r.pathname.slice(1);return n.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark primary-color"},n.a.createElement(v.b,{as:v.b,className:"navbar-brand",to:"all-requests"},a),n.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#basicExampleNav","aria-controls":"basicExampleNav","aria-expanded":"false","aria-label":"Toggle navigation"},n.a.createElement("span",{className:"navbar-toggler-icon"})),n.a.createElement("div",{className:"collapse navbar-collapse",id:"basicExampleNav"},n.a.createElement("ul",{className:"navbar-nav mr-auto"},n.a.createElement("li",{className:"nav-item "+("all-requests"===o||""===o?"active":"")},n.a.createElement(g.a.Link,{className:"nav-link",as:v.b,href:"all-requests",to:"all-requests"},"Deliver!")),n.a.createElement("li",{className:"nav-item "+("ask-for-delivery"===o?"active":"")},n.a.createElement(g.a.Link,{className:"nav-link",as:v.b,href:"ask-for-delivery",to:"ask-for-delivery"},"Ask for delivery")),n.a.createElement("li",{className:"nav-item "+("my-deliveries"===o?"active":"")},n.a.createElement(g.a.Link,{className:"nav-link",as:v.b,href:"my-deliveries",to:"my-deliveries"},"My deliveries"))),n.a.createElement("ul",{className:"navbar-nav mr-auto mr-sm-2"},n.a.createElement("li",{className:"nav-item dropdown"},n.a.createElement("div",{className:"nav-link dropdown-toggle waves-effect waves-light",id:"navbarDropdownMenuLink-4","data-toggle":"dropdown","aria-haspopup":"true",href:"#","aria-expanded":"true"},n.a.createElement("i",{className:"fas fa-user"}),"Profile"),n.a.createElement("div",{className:"dropdown-menu dropdown-menu-right dropdown-info","aria-labelledby":"navbarDropdownMenuLink-4"},!1===t&&n.a.createElement("div",null,n.a.createElement("div",{className:"dropdown-item waves-effect waves-light","data-toggle":"modal","data-target":"#registerModal"},"Register"),n.a.createElement("div",{className:"dropdown-item waves-effect waves-light","data-toggle":"modal","data-target":"#loginModal"},"Login")),!0===t&&n.a.createElement("div",null,n.a.createElement("div",{className:"dropdown-item waves-effect waves-light","data-toggle":"modal","data-target":"#myProfileModal"},"My profile"),n.a.createElement("button",{onClick:l,className:"dropdown-item waves-effect waves-light"},"Logout")))))))}}]),t}(n.a.Component),y=Object(f.f)(b),E={None:"",Pit:"Pit",Starbucks:"Starbucks",GrabNGo:"Grab N' Go"};var N=function(e){Object(h.a)(t,e);var a=Object(p.a)(t);function t(e){var r;return Object(m.a)(this,t),(r=a.call(this,e)).state={apiUrl:e.apiUrl,fullName:"",dormAndRoom:"",email:"",foodStation:E.None,orderNumber:""},r}return Object(d.a)(t,[{key:"fullNameChanged",value:function(e){this.setState({fullName:e.target.value})}},{key:"dormAndRoomChanged",value:function(e){this.setState({dormAndRoom:e.target.value})}},{key:"emailChanged",value:function(e){this.setState({email:e.target.value})}},{key:"foodStationChanged",value:function(e){this.setState({foodStation:e.target.value})}},{key:"orderNumberChanged",value:function(e){this.setState({orderNumber:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var a=new FormData(e.target),t={schemaVersion:"request.1",fullName:a.get("fullName"),dormAndRoom:a.get("dormAndRoom"),email:a.get("email"),foodStation:this.state.foodStation,orderNumber:a.get("orderNumber")},r=function(e){return""===e.schemaVersion.trim()?"Schema version is empty":e.fullName.trim().includes(" ")?e.email.includes("@u.rochester.edu")?"":"Please enter valid e-mail (must contain @u.rochester.edu)":"Please enter full name"}(t);""===r?fetch("".concat(this.state.apiUrl,"/create_request"),{method:"POST",credentials:"include",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then(this.props.history.push("/all-requests")):alert("Error: ".concat(r,"."))}},{key:"render",value:function(){var e=this.state,a=e.fullName,t=e.dormAndRoom,r=e.email,l=e.foodStation,o=e.orderNumber,i=this.fullNameChanged.bind(this),s=this.dormAndRoomChanged.bind(this),c=this.emailChanged.bind(this),m=this.foodStationChanged.bind(this),d=this.orderNumberChanged.bind(this),u=this.handleSubmit.bind(this);return n.a.createElement("form",{onSubmit:u},n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"text",className:"form-control",onChange:i,id:"fullName",name:"fullName",placeholder:"Full Name",value:a,required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"text",className:"form-control",onChange:s,id:"dormAndRoom",name:"dormAndRoom",placeholder:"Dorm and Room",value:t,required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"email",className:"form-control",onChange:c,id:"email",name:"email",placeholder:"email@u.rochester.edu",value:r,required:!0})),n.a.createElement("div",{className:"form-row"},n.a.createElement("div",{className:"form-group col-md-6"},n.a.createElement("select",{className:"form-control",onChange:m,id:"foodStation",name:"foodStation",value:l,required:!0},n.a.createElement("option",{disabled:!0,value:E.None}," -- Please select GrubHub Station -- "),n.a.createElement("option",{value:E.Pit},"Pit"),n.a.createElement("option",{value:E.Starbucks},"Starbucks"),n.a.createElement("option",{value:E.GrabNGo},"Grab N' Go"))),n.a.createElement("div",{className:"form-group col-md-6"},n.a.createElement("input",{type:"text",className:"form-control",onChange:d,id:"orderNumber",name:"orderNumber",placeholder:"Order Number(s)",value:o,required:!0}))),n.a.createElement("button",{type:"submit",id:"submitButton",className:"btn btn-primary float-right"},"Send pick-up request"))}}]),t}(n.a.Component),w=Object(f.f)(N),k=t(35),S=t.n(k),j=(t(70),function(e){Object(h.a)(t,e);var a=Object(p.a)(t);function t(e){var r;return Object(m.a)(this,t),(r=a.call(this,e)).state={error:null,apiUrl:e.apiUrl,myDeliveries:[],haveMyDeliveriesLoaded:!1},r.getDeliveries=r.getDeliveries.bind(Object(u.a)(r)),r}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getDeliveries()}},{key:"getDeliveries",value:function(){var e=Object(c.a)(s.a.mark((function e(){var a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S.a.get("".concat(this.state.apiUrl,"/my_deliveries")).then((function(e){return e.json()})).then((function(e){return a.setState({myDeliveries:e,haveMyDeliveriesLoaded:!0})})).catch((function(e){return a.setState({error:e,haveMyDeliveriesLoaded:!0})}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,a=e.error,t=e.myDeliveries,r=e.haveMyDeliveriesLoaded,l=t.map((function(e){return n.a.createElement("li",{key:e._id,className:"list-group-item d-flex justify-content-between align-items-center mb-2"},e.foodStation,n.a.createElement("div",{className:"d-flex align-items-center float-right"},n.a.createElement("div",{style:{marginRight:"1rem"}},e.time)))}));return n.a.createElement("div",{id:"my-deliveries"},n.a.createElement("div",{id:"load-my-deliveries",style:r?{display:"none"}:{}},n.a.createElement("img",{src:"/PitBoss/loading.gif",alt:"Loading..."})),n.a.createElement("div",{id:"error-my-deliveries",className:"alert alert-info",style:null===a?{display:"none"}:{}},"This tab hasn't been implemented yet, please wait ;)"),n.a.createElement("ul",{id:"deliveries-list",className:"list-group",style:r?{}:{display:"none"}},l))}}]),t}(n.a.Component)),L=(t(71),t(36)),O=t.n(L),C={prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"",seconds:"<1 min",minute:"1 min",minutes:"%d mins",hour:"1 hr",hours:"%d hrs",day:"1 day",days:"%d days",month:"1 mon",months:"%d mon",year:"1 yr",years:"%d yrs",wordSeparator:" "},q=t(37),x=t.n(q);var D=function(e){Object(h.a)(t,e);var a=Object(p.a)(t);function t(e){var r;return Object(m.a)(this,t),(r=a.call(this,e)).state={apiUrl:e.apiUrl,requests:[],haveRequestsLoaded:!1},r.getRequests=r.getRequests.bind(Object(u.a)(r)),r}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getRequests()}},{key:"getRequests",value:function(){var e=Object(c.a)(s.a.mark((function e(){var a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("".concat(this.state.apiUrl,"/requests"),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){return a.setState({requests:e,haveRequestsLoaded:!0})}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,a=e.requests,t=e.haveRequestsLoaded,r=a.length,l=a.map((function(e,a){return n.a.createElement("li",{key:e._id,className:"list-group-item d-flex justify-content-between align-items-center "+(a!==r-1?"mb-2":"")},e.foodStation,n.a.createElement("div",{className:"d-flex align-items-center float-right"},n.a.createElement("div",{style:{marginRight:".50rem"}},function(e){var a=x()(C),t=new Date(Date.parse(e));return n.a.createElement(O.a,{date:t,formatter:a})}(e.created)),n.a.createElement("button",{className:"float-right btn btn-dark"},"Deliver!")))}));return n.a.createElement("div",{id:"requests"},n.a.createElement("div",{id:"load-requests",style:t?{display:"none"}:{}},n.a.createElement("img",{src:"/PitBoss/loading.gif",alt:"Loading..."})),n.a.createElement("ul",{id:"requests-list",className:"list-group",style:t?{}:{display:"none"}},l))}}]),t}(n.a.Component);var P=function(e){Object(h.a)(t,e);var a=Object(p.a)(t);function t(e){var r;return Object(m.a)(this,t),(r=a.call(this,e)).state={apiUrl:e.apiUrl,hasAllergy:!1},r}return Object(d.a)(t,[{key:"allergyChanged",value:function(e){this.setState({hasAllergy:e.target.checked})}},{key:"handleSubmit",value:function(e){e.preventDefault();var a=new FormData(e.target),t=a.get("fullName"),r=a.get("dormAndRoom"),n=a.get("email"),l=this.state.hasAllergy,o=a.get("allergies");null===o&&(o="");var i=a.get("password"),s={schemaVersion:"user.1",fullName:t,dormAndRoom:r,email:n,password:i,hasAllergy:l,allergies:o},c=i!==a.get("password-repeat")?"Passwords do not match":function(e){return""===e.schemaVersion.trim()?"Schema version is empty":e.fullName.trim().includes(" ")?e.email.includes("@u.rochester.edu")?!e.password.length>6?"Please enter a secure password (6 characters or above)":"":"Please enter valid e-mail (must contain @u.rochester.edu)":"Please enter full name"}(s);""===c?fetch("".concat(this.state.apiUrl,"/auth/register"),{method:"POST",credentials:"include",body:JSON.stringify(s),headers:{"content-type":"application/json"}}):alert("Error: ".concat(c,"."))}},{key:"render",value:function(){var e=this.state.hasAllergy,a=this.allergyChanged.bind(this),t=this.handleSubmit.bind(this);return n.a.createElement("div",{className:"modal fade",id:"registerModal",tabIndex:"-1",role:"dialog","aria-labelledby":"registerModalLabel","aria-hidden":"true"},n.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},n.a.createElement("div",{className:"modal-content"},n.a.createElement("div",{className:"modal-header"},n.a.createElement("h5",{className:"modal-title",id:"registerModalLabel"},"Register an account"),n.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},n.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),n.a.createElement("form",{onSubmit:t},n.a.createElement("div",{className:"modal-body"},n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"text",className:"form-control",id:"fullName",name:"fullName",placeholder:"Full Name",required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"text",className:"form-control",id:"dormAndRoom",name:"dormAndRoom",placeholder:"Dorm and Room",required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"email",className:"form-control",id:"register-email",name:"email",placeholder:"email@u.rochester.edu",required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"password",className:"form-control",id:"register-password",name:"password",placeholder:"Password",required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"password",className:"form-control",id:"register-password-repeat",name:"password-repeat",placeholder:"Password (confirm)",required:!0})),n.a.createElement("div",{className:"form-group form-check"},n.a.createElement("input",{type:"checkbox",defaultChecked:e,onChange:a,className:"form-check-input",id:"exampleCheck1"}),n.a.createElement("label",{className:"form-check-label",htmlFor:"exampleCheck1"},"Any allergies?")),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"text",className:"form-control",id:"allergies",name:"allergies",placeholder:"Allergies",disabled:this.state.hasAllergy?"":"disabled",required:this.state.hasAllergy?"required":""}))),n.a.createElement("div",{className:"modal-footer"},n.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close"),n.a.createElement("button",{type:"submit",id:"registerButton",className:"btn btn-primary"},"Register"))))))}}]),t}(n.a.Component);var U=function(e){Object(h.a)(t,e);var a=Object(p.a)(t);function t(e){var r;return Object(m.a)(this,t),(r=a.call(this,e)).state={apiUrl:e.apiUrl,error:null},r}return Object(d.a)(t,[{key:"handleSubmit",value:function(e){var a=this;e.preventDefault();var t=new FormData(e.target),r={email:t.get("email"),password:t.get("password")},n=function(e){return e.email.includes("@u.rochester.edu")?!e.password.length>6?"Please enter a secure password (6 characters or above)":"":"Please enter valid e-mail (must contain @u.rochester.edu)"}(r);""===n?fetch("".concat(this.state.apiUrl,"/auth/login"),{method:"POST",credentials:"include",body:JSON.stringify(r),headers:{"content-type":"application/json"}}).then((function(e){e.json().then((function(t){200===e.status?(a.setState({error:null}),console.log("Logged in as ".concat(t.userId)),a.props.onLoginChange({isLoggedIn:!0,userId:t.userId})):a.setState({error:"".concat(e.status," Error: ").concat(t.message)})}))})):alert("Error: ".concat(n,"."))}},{key:"render",value:function(){var e=this.state.error,a=this.handleSubmit.bind(this);return n.a.createElement("div",{className:"modal fade",id:"loginModal",tabIndex:"-1",role:"dialog","aria-labelledby":"loginModalLabel","aria-hidden":"true"},n.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},n.a.createElement("div",{className:"modal-content"},n.a.createElement("div",{className:"modal-header"},n.a.createElement("h5",{className:"modal-title",id:"loginModalLabel"},"Login to your account"),n.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},n.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),null!==e&&n.a.createElement("div",{className:"alert alert-danger",role:"alert"},e),n.a.createElement("form",{onSubmit:a},n.a.createElement("div",{className:"modal-body"},n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"email",className:"form-control",id:"loginEmail",name:"email",placeholder:"email@u.rochester.edu",required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"password",className:"form-control",id:"loginPassword",name:"password",placeholder:"Password",required:!0}))),n.a.createElement("div",{className:"modal-footer"},n.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close"),n.a.createElement("button",{type:"submit",id:"loginButton",className:"btn btn-primary"},"Login"))))))}}]),t}(n.a.Component),R=Object(f.f)(U),A=(t(74),t(75),function(e){Object(h.a)(t,e);var a=Object(p.a)(t);function t(e){var r;return Object(m.a)(this,t),(r=a.call(this,e)).state={apiUrl:"https://pitboss-vlad.herokuapp.com",isLoggedIn:!1,userId:null},r.doLogin=r.doLogin.bind(Object(u.a)(r)),r}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.doLogin()}},{key:"doLogin",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("".concat(this.state.apiUrl,"/auth/cookie"),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){return console.log(e)}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onLoginChange",value:function(e){this.setState({isLoggedIn:e.isLoggedIn,userId:e.userId})}},{key:"render",value:function(){var e=this.state,a=e.isLoggedIn,t=(e.userId,e.apiUrl),r=this.onLoginChange.bind(this);return n.a.createElement("div",{id:"App",className:"container"},n.a.createElement(v.a,{basename:"/PitBoss",hashType:"noslash"},n.a.createElement("div",{id:"navBar"},n.a.createElement(y,{apiUrl:t,title:"PitBoss",isLoggedIn:a})),n.a.createElement(P,{apiUrl:t,onLoginChange:r}),n.a.createElement(R,{apiUrl:t,onLoginChange:r}),n.a.createElement(f.c,null,n.a.createElement(f.a,{exact:!0,path:"/"},n.a.createElement(D,{apiUrl:t})),n.a.createElement(f.a,{exact:!0,path:"/all-requests",render:function(){return n.a.createElement(D,{apiUrl:t})}}),n.a.createElement(f.a,{exact:!0,path:"/ask-for-delivery",render:function(){return n.a.createElement("div",{id:"deliveryForm"},n.a.createElement(w,{apiUrl:t}))}}),n.a.createElement(f.a,{exact:!0,path:"/my-deliveries",render:function(){return n.a.createElement("div",{id:"myDeliveriesPanel"},n.a.createElement(j,null))}}),n.a.createElement(f.a,{render:function(){return n.a.createElement("div",{id:"error"},n.a.createElement("h4",{class:"alert alert-danger mb-0",role:"alert"},"404 error: Page not found."))}}))))}}]),t}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.e94219eb.chunk.js.map